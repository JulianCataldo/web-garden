---
import TransitionOverlay from '@julian_cataldo/astro-transition/Overlay/TransitionOverlay.astro';
import Prefetch from '@julian_cataldo/astro-prefetch/Prefetch.astro';
import Tooltips from '@julian_cataldo/astro-tooltips/Tooltips.astro';
import SEO from '@julian_cataldo/astro-seo/SEO.astro';
import ScrollObserver from '@julian_cataldo/astro-scroll-observer/ScrollObserver.astro';

import './style.global.scss';

export interface Props {
  title: string;
}

const { title } = Astro.props as Props;
---

<!DOCTYPE html>
<html lang='en'>
  <head>
    <meta charset='UTF-8' />
    <meta name='viewport' content='width=device-width' />
    <link rel='icon' type='image/x-icon' href='/favicon.ico' />
    <title>{title}</title>
    <!--  -->
    <Tooltips />
    <!--  -->
    <Prefetch max={3} />
    <!--  -->
    <SEO
      image={'/some_image_url-preferably_absolute.jpg'}
      title={'Le cool title'}
      description={'Le insightful description'}
      siteName={'Le Website'}
    />
    <!--  -->
    <ScrollObserver />
    <!--  -->
  </head>
  <body>
    <!--  -->
    <TransitionOverlay speed={1000} color='red' zIndex={99} />
    <!--  -->
    <nav>
      My Navbar | Some | Link | Foo | Bar | Omelette | Bilbao | ℹ️&nbsp;&nbsp;
    </nav>

    <slot></slot>

    <style lang='scss'>
      nav {
        position: fixed;
        z-index: 101;
        top: 0;
        padding: 2rem;
        width: 100%;
        background-color: darkslategrey;
        color: beige;
        &::after {
          font-weight: 700;
        }
      }
      :global(main) {
        margin-top: 5rem;
      }
    </style>
    <style lang='scss' is:global>
      nav {
        opacity: 0;
        transform: translateY(-100%);
        transition: all 1s;

        [data-is-scrolling-up='true'] & {
          opacity: 1;
          transform: translateY(0);
          &::after {
            content: 'Is scrolling up…';
          }
        }
        [data-is-top='true'] & {
          opacity: 1;
          transform: translateY(0);
          &::after {
            content: 'Is top';
          }
        }
        [data-is-bottom='true'] & {
          opacity: 1;
          transform: translateY(0);
          &::after {
            content: 'Is bottom';
          }
        }
      }
    </style>
  </body>
</html>
